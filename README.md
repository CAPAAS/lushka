# Lushka
Лушка — маленький сервер, позволяющий быстро конфигурировать и запускать различные заглушки для тестирования своих сервисов.

![](assets/images/lushka.png)

## Установка

Добавить строку ниже в свой Gemfile:

```ruby
gem 'lushka'
```

Потом выполнить:

    $ bundle install

Или установить просто как Gem (предпочтительно):

    $ gem install lushka

## Использование

### Pods.lushka

#### Запустить сервер
    $ lushka

#### Выполнение запросов
Записать запрос в лог:

    $ POST http://localhost:3500/audit

Вывести лог:

    $ GET http://localhost:3500/audit

### Zag.lushka
#### Конфигурирование
В папке `zag` создайте структуру папок, соответствующую желаемой заглушке, в папках создайте файл `response.json` c JSON-ответом. Например:
```
lushka
│ zag.yaml
│      
└─zag
│   └─countries
│   │ │ zag.yaml
│   │ │ response.json
│   │ └─russia
│   │   │ zag.yaml
│   │   └─response.json
```
Опционально в папке рядом с ответом можно размещать файл `zag.yaml` с дополнительными настройками конкретного узла. 

Файлов `response.yaml` может быть несколько, в них можно опционально добавлять указание метода и код ошибки `response_[:method]_[:code].yaml`, например:

```
response_post_200.yaml
response_delete.yaml
response_400.yaml
...
```

#### Запустить сервер
    $ lushka

#### Выполнение запросов
Запросы к серверу отправляются по адресам, соответствующим структуре папок внутри `zag`. По-умолчанию будет отдан ответ без кода, либо с кодом 200, если он есть. 

Для форсирования получения ответа с определенным кодом необходимо в заголовке передать его значение:

```
Expect-Response: 200
```

## Лицензирование

Lushka распространяется под открытой лицензией [CAPAAL](LICENSE.txt).
